#STOP we could do cv on 300 test 70 train, get best lambda and refit on all data
#next evaluate on train
m_full2 <- glmnet(features[1:370,], target[1:370], lambda = rev(lambdas)[best_l], standardize = FALSE)
preds_full2 <- predict.glmnet(m_full2, newx = features[371:432,])
#preds_full2 <- predict.glmnet(m_full2, newx = features[371:432,], s = 0.0000000001)
df2 <- data.frame(preds = preds_full2, target = target[371:432])
#dim(preds_full)
ggplot() + geom_line(data = df2, mapping = aes(x=1:62, y=s0, colour = "blue")) +
geom_line(data = df, mapping= aes(x=1:62, y=target))
?scale()
60/7.37
8/60
13*20000
13*20000/60
8/60*20000
8/60*20000/60
617/94
617/94 * 20000
617/94 * 20000 / 60
617/94 * 20000 / 60 / 60
(18*60+18)/ 175
(18*60+18)/ 175 * 20000 / 60 / 60
(38*60+36)/ 450 * 20000 / 60 / 60
estimate_runtime <- function(min,sec, steps) {
rt <- (min*60+sec) / steps * 20000 / 60 / 60
return(rt)
}
estimate_runtime(6,30,120)
estimate_runtime(11,06,220)
estimate_runtime(0,30,480)
estimate_runtime(32,06,480)
estimate_runtime(32,06,520)
estimate_runtime(46,23,755)
estimate_runtime(71,11,1270)
estimate_runtime(71,36,1270)
seconds(100)
time(x = )
?time
estimate_runtime <- function(hours,min,sec, steps) {
rt <- ((hours*3600)+(min*60+sec)) / steps * 20000 / 60 / 60
return(rt)
}
estimate_runtime(3,47,36,5570)
estimate_runtime(3,47,25,5570)
estimate_runtime(4,0,12,5920)
sarah <- "miau"
dario <- "miau"
paste(sara, dario)
paste(sarah, dario)
a <- 1
b <- 2
a + b
a <- c(1:10)
a
a[1]
a[5]
for(i in a) {
print(i)
}
4*5
55
5*5
miau <- function(n) {
resultad <- n*5
return(resultad)
}
miau(3)
miau(9)
sarah <- "miau"
dario <- "miau"
paste(sarah, dario)
knitr::opts_chunk$set(warning = FALSE, message = FALSE, echo = FALSE)
library(patchwork)
library(ggpubr)
library(raster)
library(glmnet)
library(Hmisc)
source("../code/R/helper-functions.R")
path_to_model_folder <- "../results/CV-fused/large-fused-5k/"
pc3 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-3.rds"))
pc3
rm(pc3)
pc4 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-4.rds"))
pc4
rm(pc4)
pc5 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-5.rds"))
pc5
rm(pc5)
pc5 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-5.rds"))
pc5 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-5.rds"))
pc5
object.size(pc5)
?object.size
object.size(pc5, unites = "Gb")
object.size(pc5, unites = "G")
object.size(pc5)
dim(pc5$data)
dim(pc5$data[[1]])
dim(pc5$data[[2]])
dim(pc5$data)
pc5$data
pc5$layers
pc5$data
rmarkdown::pandoc_version
rmarkdown::pandoc_version()
---
title: "test templ"
author: "Dario Lepke"
date: '2022-07-28'
output: html_document
---
\documentclass[12pt]{article}
\usepackage[]{graphicx}
\usepackage[]{color}
\usepackage{alltt}
\newcommand{\mytitle}{My Super Fancy Thesis Title}
\newcommand{\myname}{Jane Doe}
\newcommand{\mysupervisor}{Dr Dre}
\usepackage[a4paper, width = 160mm, top = 35mm, bottom = 30mm,
bindingoffset = 0mm]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{ragged2e}
\usepackage{xcolor}
\usepackage[round, comma]{natbib}
\usepackage{fancyhdr}
\newcommand{\changefont}{%
\fontsize{8}{11}\selectfont
}
\usepackage{hyperref}
\hypersetup{
colorlinks = true,
linkcolor = black,
urlcolor = black,
citecolor = black}
\pagestyle{fancy}
\fancyhead{}
\fancyhead[R]{\changefont{\mytitle}}
\fancyfoot{}
\fancyfoot[R]{\thepage}
\setlength{\headheight}{14.5pt}
\setlength{\parindent}{0pt}
\interfootnotelinepenalty = 10000
% ------------------------------------------------------------------------------
% MAIN -------------------------------------------------------------------------
% ------------------------------------------------------------------------------
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
% FRONT PAGE -------------------------------------------------------------------
\begin{titlepage}
\begin{center}
\LARGE
Masters Thesis
\vspace{0.5cm}
\rule{\textwidth}{1.5pt}
\LARGE
\textbf{\mytitle}
\rule{\textwidth}{1.5pt}
\vspace{0.5cm}
\large
Department of Statistics \\
Ludwig-Maximilians-Universität München
\vfill
\Large
\textbf{\myname}
\vfill
\large
Munich, Month Day\textsuperscript{th}, Year
\vfill
\includegraphics[width = 0.4\textwidth]{sigillum.png}
\vfill
\normalsize
Submitted in partial fulfillment of the requirements for the degree of M. Sc.
\\
Supervised by \mysupervisor
\end{center}
\end{titlepage}
\end{document}
rm(list=ls())
getwd()
# inspect error plots
# inspect coef plots
# inspect prediction plots
# length(ids$train$Training060)
# length(ids$test$Testing060)
path_to_model_folder <- "../results/CV-fused/noclust-large-fused-5k/"
pred_plot_full <- readRDS(paste0(path_to_model_folder, "pred-plots/pred-plot-full.rds"))
attr(pred_plot_full, "mse")
pred_plot_full
path_to_model_folder <- "../results/CV-fused/noclust-large-fused-5k/"
source("../code/R/helper-functions.R")
pc5 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-drop-out-fold-5.rds"))
pc5 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-5.rds"))
pc5 <- readRDS(paste0(path_to_model_folder, "/coef-plots/coef-plot-fold-5.rds"))
pc5
?fusedlasso
diag(3,4)
library(igraph)
library(genlasso)
b <- make_lattice(c(3,3))
getDgSparse(b)
bs <- getDgSparse(b)
bs
bs%*%t(bs)
t(bs)%*%bs
bs <- getDgSparse(b)
t(bs)%*%bs
plot(b)
?glmnet
library(glmnet)
?glmnet
?diff
c(1:10)
c(1,2,3,4,5,7,9,11)
a <- c(1,2,3,4,5,7,9,11)
diff(a)
diff(a, lag =2)
knitr::kable(data.frame(c("1","2", "3", "4", "5"), booktabs=TRUE
c(mse1,mse2,mse3,mse4,mse5)), col.names = c("Cluster", "MSE"))
knitr::kable(data.frame(c("1","2", "3", "4", "5"), booktabs=TRUE,
c(mse1,mse2,mse3,mse4,mse5)), col.names = c("Cluster", "MSE"))
knitr::kable(data.frame(c("1","2", "3", "4", "5"),
c(mse1,mse2,mse3,mse4,mse5)), col.names = c("Cluster", "MSE")
, "latex")
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-1/"
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse1 <- get_mse_from_pred_plot(full_preds)
knitr::opts_chunk$set(echo=FALSE, warning = FALSE, message = FALSE, out.width = '50%', fig.align = 'center')
options(knitr.duplicate.label = "allow")
library(patchwork)
library(ggpubr)
library(raster)
library(glmnet)
library(Hmisc)
library(patchwork)
source("../code/R/helper-functions.R")
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-5/"
err_bars_plot <- readRDS(paste0(path_to_model_folder, "/err-mat-plots/err-bars-plot.rds"))
p1 <- readRDS(paste0(path_to_model_folder, "err-mat-plots/err-plot-fold-1.rds"))
p2 <- readRDS(paste0(path_to_model_folder, "err-mat-plots/err-plot-fold-2.rds"))
p3 <- readRDS(paste0(path_to_model_folder, "err-mat-plots/err-plot-fold-3.rds"))
p4 <- readRDS(paste0(path_to_model_folder, "err-mat-plots/err-plot-fold-4.rds"))
p5 <- readRDS(paste0(path_to_model_folder, "err-mat-plots/err-plot-fold-5.rds"))
pred_plot_1 <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-fold-1.rds"))
pred_plot_2 <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-fold-2.rds"))
pred_plot_3 <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-fold-3.rds"))
pred_plot_4 <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-fold-4.rds"))
pred_plot_5 <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-fold-5.rds"))
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
coef_plot_full <- readRDS(paste0(path_to_model_folder,
"coef-plots/coef-plot-full.rds"))
full_model <- readRDS(paste0(path_to_model_folder, "full-model.rds"))
intercept5 <- round(full_model$a0,2)
lambda5 <- full_model$lambda
mse5 <- get_mse_from_pred_plot(full_preds)
err_bars_plot + ggtitle("MSE for lasso on cluster 5")
full_preds + ggtitle("Predictions on evaluation set, lasso on cluster 5")
coef_plot_full + ggtitle("Coefficient plot, lasso on cluster 5") + theme(legend.position = "bottom")
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-1/"
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse1 <- get_mse_from_pred_plot(full_preds)
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-2/"
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse2 <- get_mse_from_pred_plot(full_preds)
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-3/"
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse3 <- get_mse_from_pred_plot(full_preds)
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-4/"
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse4 <- get_mse_from_pred_plot(full_preds)
path_to_model_folder <- "../results/CV-lasso/cluster-cv-lasso-og2/cluster-5/"
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse5 <- get_mse_from_pred_plot(full_preds)
knitr::kable(data.frame(c("1","2", "3", "4", "5"),
c(mse1,mse2,mse3,mse4,mse5)), col.names = c("Cluster", "MSE")
, "latex")
knitr::kable(data.frame(c("1","2", "3", "4", "5"),
c(mse1,mse2,mse3,mse4,mse5)), col.names = c("Cluster", "MSE")
, "latex")
knitr::kable(data.frame(c("1","2", "3", "4", "5"),
c(mse1,mse2,mse3,mse4,mse5)), col.names = c("Cluster", "MSE")
, format="latex")
library(bookdown)
setwd("the")
setwd("thesis")
getwd()
setwd("Repos/MA-climate/")
setwd("the")
setwd("thesis/")
library(bookdown)
preview_chapter("lasso-summary-cluster-5.Rmd", output_format = "bookdown::pdf_document2")
#path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-005/"
path_to_model_folder <- "./results/CV-lasso/test-lasso-og/"
save_mse(path_to_model_folder)
save_mse <- function(path_to_model_folder) {
full_preds <- readRDS(paste0(path_to_model_folder, "/pred-plots/pred-plot-full.rds"))
mse_full <- get_mse_from_pred_plot(full_preds)
saveRDS(mse_full, "mse_full_model_eval.rds")
print(mse_full)
}
#path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-005/"
path_to_model_folder <- "./results/CV-lasso/test-lasso-og/"
save_mse(path_to_model_folder)
setwd("..")
#setwd("..")
save_mse(path_to_model_folder)
#path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-005/"
path_to_model_folder <- "./results/CV-lasso/test-lasso-stand/"
#setwd("..")
save_mse(path_to_model_folder)
#path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-005/"
path_to_model_folder <- "./results/CV-lasso/test-diff1-lasso/"
#setwd("..")
save_mse(path_to_model_folder)
#path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-005/"
path_to_model_folder <- "./results/CV-lasso/test-deseas-lasso/"
#setwd("..")
save_mse(path_to_model_folder)
# path_to_model_folder <- "./results/CV-lasso/test-deseas-lasso/"
path_to_model_folder <- "./results/CV-fused/large-fused-5k//"
#setwd("..")
save_mse(path_to_model_folder)
# path_to_model_folder <- "./results/CV-lasso/test-deseas-lasso/"
path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k//"
#setwd("..")
save_mse(path_to_model_folder)
# path_to_model_folder <- "./results/CV-lasso/test-deseas-lasso/"
path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-01//"
#setwd("..")
save_mse(path_to_model_folder)
# path_to_model_folder <- "./results/CV-lasso/test-deseas-lasso/"
path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-05//"
#setwd("..")
save_mse(path_to_model_folder)
# path_to_model_folder <- "./results/CV-lasso/test-deseas-lasso/"
path_to_model_folder <- "./results/CV-fused/noclust-large-fused-5k-gamma-005//"
#setwd("..")
save_mse(path_to_model_folder)
sessionInfo()
library(bookdown)
getwd()
setwd("thesis/")
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
render_book()
render_book()
render_book()
render_book()
path_to_model_folder <- "../results/CV-fused/noclust-large-fused-5k/"
knitr::include_graphics(paste0(path_to_model_folder, "best-lambda-res.png"))
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_document2")
path_to_model_folder <- "../results/CV-fused/noclust-large-fused-5k/"
paste0(path_to_model_folder, "best-lambda-res.png")
setwd(path_to_model_folder)
setwd(path_to_model_folder)
knitr::include_graphics("./best-lambda-res.png")
setwd(path_to_model_folder)
knitr::include_graphics("best-lambda-res.png")
path_to_model_folder
render_book(output_format = "bookdown::pdf_book")
getwd()
render_book(output_format = "bookdown::pdf_book")
library(bookdown)
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
# setwd(path_to_model_folder)
# knitr::include_graphics("./best-lambda-res.png")
knitr::include_graphics("best-lambda-res-noclust.png")
# setwd(path_to_model_folder)
# knitr::include_graphics("./best-lambda-res.png")
knitr::include_graphics("./png/best-lambda-res-noclust.png")
render_book()
render_book(output_format = "bookdown::pdf_book")
k <- readRDS(paste0(path_to_model_folder, "best-lambda-res.Rds"))
k$err_plot
# setwd(path_to_model_folder)
# knitr::include_graphics("./best-lambda-res.png")
knitr::include_graphics("./png/best-lambda-res-noclust.png", rel_path = TRUE)
render_book()
render_book(output_format = "pdf_book")
tinytex::tlmgr_update()
render_book(output_format = "pdf_book")
render_book(output_format = "pdf_book")
knitr::include_graphics("graph_plot.png",rel_path = TRUE)
?preview_chapter
options(knitr.duplicate.label = 'allow')
render_book()
render_book(output_format = NULL)
render_book()
render_book()
render_book(output_format = "pdf_book")
render_book(output_format = "pdf_document2")
render_book(output_format = "pdf_document2")
render_book()
render_book()
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
render_book(output_format = "bookdown::pdf_book")
render_book()
render_book()
render_book()
library(igraph)
k <- readRDS("../data/processed/graph_sst.rds")
cl <- clusters(k)
#png(filename = "graph_plot.png")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
#png(filename = "graph_plot.png")
jpeg("graph_jpeg.jpeg")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
dev.off()
k <- readRDS("../data/processed/graph_sst.rds")
cl <- clusters(k)
#png(filename = "graph_plot.png")
jpeg("graph_jpeg.jpeg")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
k <- readRDS("../data/processed/graph_sst.rds")
cl <- clusters(k)
#png(filename = "graph_plot.png")
jpeg("graph.jpeg")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
jpeg("graph.jpeg")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
dev.off()
jpeg("graph.jpeg")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
dev.off()
render_book()
jpg("graph.jpg")
#png(filename = "graph_plot.png")
jpeg("graph.jpg")
jpeg("graph.jpg")
plot(k, vertex.label = NA, vertex.size=0.00001,
edge.width= 0.0001,
vertex.color=cl$membership*10,
mark.expand = 15)
dev.off()
knitr::include_graphics("../figures/graph_jpeg.jpg")
knitr::include_graphics("../figures/graph_jpeg.jpg")
knitr::include_graphics("../figures/graph.jpg")
render_book()
render_book()
render_book(output_format = "bookdown::pdf_book")
coef_plot <- readRDS(paste0(path_to_model_folder,
"coef-plots/coef-plot-full.rds"))
path_to_model_folder
?saveRDS
source("code/R/helper-functions.R")
library(ggplot2)
#together("results/CV-fused/noclust-large-fused-5k/")
path_to_model_folder <- "results/CV-fused/noclust-large-fused-5k/"
# debug(together)
together(path_to_model_folder, drop_out=FALSE)
getwd()
setwd("..")
#together("results/CV-fused/noclust-large-fused-5k/")
path_to_model_folder <- "results/CV-fused/noclust-large-fused-5k/"
# debug(together)
together(path_to_model_folder, drop_out=FALSE)
coef_plot <- readRDS(paste0(path_to_model_folder,
"coef-plots/coef-plot-full.rds"))
path_to_model_folder <- "../results/CV-fused/noclust-large-fused-5k/"
coef_plot <- readRDS(paste0(path_to_model_folder,
"coef-plots/coef-plot-full.rds"))
#together("results/CV-fused/noclust-large-fused-5k/")
path_to_model_folder <- "results/CV-fused/noclust-large-fused-5k/"
# debug(together)
together(path_to_model_folder, drop_out=FALSE)
`coef-plot-full` <- readRDS("C:/Users/Mufasa/Documents/Repos/MA-climate/results/CV-fused/noclust-large-fused-5k/coef-plots/coef-plot-full.rds")
coef-plot-full
best_l_chosen <- readRDS("C:/Users/Mufasa/Documents/Repos/MA-climate/results/CV-fused/noclust-large-fused-5k/best_l_chosen.rds")
best_l_chosen
debug(together)
together(path_to_model_folder, drop_out=FALSE)
model$X
plt
plt
source("code/R/helper-functions.R")
#together("results/CV-fused/noclust-large-fused-5k/")
path_to_model_folder <- "results/CV-fused/noclust-large-fused-5k/"
source("code/R/helper-functions.R")
library(ggplot2)
#together("results/CV-fused/noclust-large-fused-5k/")
path_to_model_folder <- "results/CV-fused/noclust-large-fused-5k/"
#debug(together)
together(path_to_model_folder, drop_out=FALSE)
`coef-plot-full` <- readRDS("C:/Users/Mufasa/Documents/Repos/MA-climate/results/CV-fused/noclust-large-fused-5k/coef-plots/coef-plot-full.rds")
`coef-plot-full`
render_book()
getwd()
setwd("thesis")
render_book()
